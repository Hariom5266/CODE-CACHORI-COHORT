<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker with Timeline & Calendar</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f5f5f5;
            padding: 20px;
        }

        h2 {
            color: #333;
        }

        .mood-options {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .mood-option {
            font-size: 30px;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: 0.3s;
            background: white;
            border: 2px solid transparent;
        }

        .mood-option:hover, .selected {
            border-color: #4CAF50;
            background: #d4f4d2;
        }

        .saveMood {
            padding: 10px 20px;
            font-size: 16px;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 5px;
            transition: 0.3s;
        }

        .saveMood:hover {
            background: #45a049;
        }

        .timeline {
            margin-top: 30px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 500px;
            margin: auto;
            text-align: left;
        }

        .timeline h3 {
            margin-bottom: 10px;
        }

        .timeline ul {
            list-style: none;
            padding: 0;
        }

        .timeline li {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timeline li:last-child {
            border-bottom: none;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            max-width: 500px;
            margin: 20px auto;
        }

        .day {
            padding: 10px;
            background: white;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .mood-day {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            background: #e3e3e3;
        }

        .filter-buttons {
            margin-bottom: 10px;
        }

        .filter-btn {
            padding: 5px 10px;
            margin: 3px;
            border: none;
            cursor: pointer;
            background: #3498db;
            color: white;
            border-radius: 5px;
        }

        .filter-btn:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>

    <h2>Daily Mood Tracker üòä</h2>

    <div class="mood-options">
        <span class="mood-option">üòä</span>
        <span class="mood-option">üò¢</span>
        <span class="mood-option">üòê</span>
        <span class="mood-option">ü§©</span>
        <span class="mood-option">üò†</span>
        <span class="mood-option">üò¥</span>
        <span class="mood-option">üò∞</span>
        <span class="mood-option">‚ù§Ô∏è</span>
    </div>

    <button class="saveMood">Save/Update Mood</button>

    <div class="timeline">
        <h3>Past Mood Timeline</h3>
        <div class="filter-buttons">
            <button class="filter-btn" onclick="loadMoodHistory('day')">Day</button>
            <button class="filter-btn" onclick="loadMoodHistory('week')">Week</button>
            <button class="filter-btn" onclick="loadMoodHistory('month')">Month</button>
        </div>
        <ul id="moodHistory"></ul>
    </div>

    <h3>Calendar View</h3>
    <div class="calendar" id="calendarView"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            let selectedMood = null;
            const moodOptions = document.querySelectorAll(".mood-option");
            const saveButton = document.querySelector(".saveMood");
            const historyList = document.getElementById("moodHistory");

            function getMoodText(emoji) {
                const moodMap = {
                    "üòä": "Happy",
                    "üò¢": "Sad",
                    "üòê": "Neutral",
                    "ü§©": "Excited",
                    "üò†": "Angry",
                    "üò¥": "Sleepy",
                    "üò∞": "Anxious",
                    "‚ù§Ô∏è": "Love"
                };
                return moodMap[emoji] || "Unknown";
            }

            moodOptions.forEach(option => {
                option.addEventListener("click", () => {
                    moodOptions.forEach(m => m.classList.remove("selected"));
                    option.classList.add("selected");
                    selectedMood = option.textContent;
                });
            });

            saveButton.addEventListener("click", () => {
                if (!selectedMood) {
                    alert("Please select a mood first!");
                    return;
                }

                const today = dayjs().format("YYYY-MM-DD");
                let moods = JSON.parse(localStorage.getItem("moods")) || [];

                const existingEntryIndex = moods.findIndex(entry => entry.date === today);
                
                if (existingEntryIndex !== -1) {
                    moods[existingEntryIndex].mood = selectedMood;
                    alert("Mood updated successfully!");
                } else {
                    moods.push({ date: today, mood: selectedMood });
                    alert("Mood saved!");
                }

                localStorage.setItem("moods", JSON.stringify(moods));
                loadMoodHistory("month");
                renderCalendar();
            });

            function loadMoodHistory(filter) {
                historyList.innerHTML = "";
                const moods = JSON.parse(localStorage.getItem("moods")) || [];
                const today = dayjs();
                
                let filteredMoods = moods.filter(entry => {
                    if (filter === "day") return dayjs(entry.date).isSame(today, "day");
                    if (filter === "week") return dayjs(entry.date).isAfter(today.subtract(7, "day"));
                    if (filter === "month") return dayjs(entry.date).isAfter(today.subtract(30, "day"));
                    return true;
                });

                filteredMoods.reverse().forEach(entry => {
                    const li = document.createElement("li");
                    li.innerHTML = `<strong>${entry.date}:</strong> ${entry.mood} (${getMoodText(entry.mood)})`;
                    historyList.appendChild(li);
                });
            }

            function renderCalendar() {
                const calendarView = document.getElementById("calendarView");
                calendarView.innerHTML = "";
                const moods = JSON.parse(localStorage.getItem("moods")) || [];

                for (let i = 1; i <= 30; i++) {
                    const day = dayjs().subtract(30 - i, "day").format("YYYY-MM-DD");
                    const moodEntry = moods.find(m => m.date === day);
                    const div = document.createElement("div");
                    div.classList.add("mood-day");
                    div.innerHTML = `${i} ${moodEntry ? moodEntry.mood : "üü©"}`;
                    calendarView.appendChild(div);
                }
            }

            loadMoodHistory("month");
            renderCalendar();
        });
    </script>

</body>
</html>
